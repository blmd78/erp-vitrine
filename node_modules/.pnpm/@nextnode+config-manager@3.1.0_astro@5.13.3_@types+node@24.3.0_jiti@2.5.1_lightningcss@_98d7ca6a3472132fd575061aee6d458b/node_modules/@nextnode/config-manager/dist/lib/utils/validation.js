import { VALID_ENVIRONMENTS, ENV_VARS } from '../definitions/constants.js';
import { InvalidEnvironmentError, AppEnvRequiredError, AppEnvUnavailableError, } from '../definitions/errors.js';
/**
 * Validate configuration object structure
 */
export const validateConfig = (config) => typeof config === 'object' && config !== null && !Array.isArray(config);
/**
 * Get current environment from APP_ENV
 * APP_ENV is mandatory - no fallback to avoid ambiguity
 */
export const getCurrentEnvironment = () => {
    if (typeof process !== 'undefined') {
        const appEnv = process.env[ENV_VARS.APP_ENV];
        if (!appEnv) {
            throw new AppEnvRequiredError();
        }
        if (!VALID_ENVIRONMENTS.includes(appEnv)) {
            throw new InvalidEnvironmentError(appEnv, VALID_ENVIRONMENTS);
        }
        // Convert to lowercase for file matching
        return appEnv.toLowerCase();
    }
    // Browser environment - throw error as APP_ENV is mandatory
    throw new AppEnvUnavailableError();
};
/**
 * Resolve environment parameter, falling back to current environment
 */
export const resolveEnvironment = (environment) => environment || getCurrentEnvironment();
//# sourceMappingURL=validation.js.map