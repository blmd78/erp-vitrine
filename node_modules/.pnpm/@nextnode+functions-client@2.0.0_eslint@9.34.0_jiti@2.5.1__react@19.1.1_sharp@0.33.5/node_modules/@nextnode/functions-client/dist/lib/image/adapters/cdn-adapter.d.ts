/**
 * CDN image optimization adapter
 * Generates optimized URLs for popular CDN providers
 * Supports Cloudflare Images, Imgix, and generic CDN patterns
 */
import type { ImageOptimizationOptions, ImageSource, LQIPConfig, OptimizedImage } from '../types.js';
import { BaseImageAdapter } from './base-adapter.js';
/**
 * Supported CDN providers
 */
export type CDNProvider = 'cloudflare' | 'imgix' | 'cloudinary' | 'generic';
/**
 * CDN adapter configuration
 */
export interface CDNAdapterConfig {
    /** CDN provider */
    provider: CDNProvider;
    /** Base URL for the CDN */
    baseUrl: string;
    /** CDN account/zone identifier (for Cloudflare, Imgix, etc.) */
    accountId?: string;
    /** API key for authenticated operations */
    apiKey?: string;
    /** Default quality profile */
    defaultProfile?: 'lossless' | 'balanced' | 'aggressive';
}
/**
 * CDN image adapter
 * Generates transformation URLs for on-the-fly image optimization
 */
export declare class CDNImageAdapter extends BaseImageAdapter {
    private readonly provider;
    private readonly baseUrl;
    private readonly accountId?;
    private readonly defaultProfile;
    constructor(config: CDNAdapterConfig);
    optimize(source: ImageSource, options?: ImageOptimizationOptions): Promise<OptimizedImage>;
    generateLQIP(source: ImageSource, config?: Partial<LQIPConfig>): Promise<string>;
    supportsFormat(format: string): boolean;
    /**
     * Sanitize and validate image source URL to prevent injection attacks
     * Prevents: path traversal, protocol injection, malicious URLs
     */
    private sanitizeSource;
    /**
     * Get URL builder configuration for current provider
     */
    private getURLBuilderConfig;
    /**
     * Build CDN transformation URL using unified logic
     */
    private buildCDNUrl;
    /**
     * Build URL with query parameters (Imgix, Generic)
     */
    private buildQueryParamURL;
    /**
     * Build URL with path-based transformations (Cloudflare, Cloudinary)
     */
    private buildPathBasedURL;
}
//# sourceMappingURL=cdn-adapter.d.ts.map