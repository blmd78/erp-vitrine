/**
 * Astro image optimization adapter
 * Wraps Astro's built-in getImage() API for build-time optimization
 */
import type { ImageFormat, ImageOptimizationOptions, ImageSource, LQIPConfig, OptimizedImage } from '../types.js';
import { BaseImageAdapter } from './base-adapter.js';
/**
 * Astro getImage options (subset of Astro's actual types)
 * This avoids hard dependency on astro:assets
 */
interface AstroImageOptions {
    src: string | ImageMetadata;
    width?: number;
    height?: number;
    format?: ImageFormat;
    quality?: number;
}
interface ImageMetadata {
    src: string;
    width: number;
    height: number;
    format: ImageFormat;
    fsPath?: string;
}
interface AstroImageResult {
    src: string;
    attributes: {
        width: number;
        height: number;
    };
}
/**
 * Type for Astro's getImage function
 */
type AstroGetImageFunction = (options: AstroImageOptions) => Promise<AstroImageResult>;
/**
 * Astro adapter configuration
 */
export interface AstroAdapterConfig {
    /**
     * Astro's getImage function
     * Must be provided by the consumer as we can't import astro:assets directly
     */
    getImage: AstroGetImageFunction;
    /**
     * Default quality profile
     */
    defaultProfile?: 'lossless' | 'balanced' | 'aggressive';
}
/**
 * Astro image adapter implementation
 * Provides build-time image optimization using Astro's Sharp-based pipeline
 */
export declare class AstroImageAdapter extends BaseImageAdapter {
    private readonly getImage;
    private readonly defaultProfile;
    constructor(config: AstroAdapterConfig);
    optimize(source: ImageSource | ImageMetadata, options?: ImageOptimizationOptions): Promise<OptimizedImage>;
    generateLQIP(source: ImageSource | ImageMetadata, config?: Partial<LQIPConfig>): Promise<string>;
    supportsFormat(format: string): boolean;
    /**
     * Type guard to check if source is ImageMetadata
     */
    private isImageMetadata;
    /**
     * Handle SVG images (pass-through, no optimization)
     */
    private handleSVG;
}
/**
 * Convenience function to optimize images with Astro
 * Matches the API from nextnode-front's image-optimizer.ts
 */
export declare function optimizeImages<T extends Record<string, ImageSource | ImageMetadata>>(images: T, getImage: AstroGetImageFunction): Promise<{
    [K in keyof T]: OptimizedImage;
}>;
export {};
//# sourceMappingURL=astro-adapter.d.ts.map